{
  "info": {
    "name": "Meme Aggregator API - Complete Test Suite",
    "description": "Comprehensive test collection for Meme Coin Aggregator API with 10+ test cases covering happy paths and edge cases",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "https://meme-aggregator-api.onrender.com",
      "type": "string"
    },
    {
      "key": "localUrl",
      "value": "http://localhost:4000",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "1. Health Check - Happy Path",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has correct structure', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('status');",
              "    pm.expect(jsonData.status).to.eql('ok');",
              "});",
              "",
              "pm.test('Response time is less than 500ms', function () {",
              "    pm.expect(pm.response.responseTime).to.be.below(500);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        },
        "description": "Test health endpoint - should always return 200 OK"
      },
      "response": []
    },
    {
      "name": "2. Get Single Token - USDC (Happy Path)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has token data', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('tokenAddress');",
              "    pm.expect(jsonData).to.have.property('priceUsd');",
              "    pm.expect(jsonData).to.have.property('source');",
              "});",
              "",
              "pm.test('Token address matches request', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.tokenAddress).to.include('EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v');",
              "});",
              "",
              "pm.test('Has valid price data', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.priceUsd).to.be.a('number');",
              "    pm.expect(jsonData.priceUsd).to.be.above(0);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/token/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
          "host": ["{{baseUrl}}"],
          "path": ["api", "token", "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"]
        },
        "description": "Fetch USDC token data from Solana"
      },
      "response": []
    },
    {
      "name": "3. Get Single Token - Invalid Address (Edge Case)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 404 or 500', function () {",
              "    pm.expect(pm.response.code).to.be.oneOf([404, 500]);",
              "});",
              "",
              "pm.test('Response has error message', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('error');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/token/invalid-address-123",
          "host": ["{{baseUrl}}"],
          "path": ["api", "token", "invalid-address-123"]
        },
        "description": "Test with invalid token address - should return error"
      },
      "response": []
    },
    {
      "name": "4. Get Token List - Default (Happy Path)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response has correct structure', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('data');",
              "    pm.expect(jsonData).to.have.property('total');",
              "    pm.expect(jsonData.data).to.be.an('array');",
              "});",
              "",
              "pm.test('Returns max 20 tokens by default', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.data.length).to.be.at.most(20);",
              "});",
              "",
              "pm.test('Each token has required fields', function () {",
              "    var jsonData = pm.response.json();",
              "    if (jsonData.data.length > 0) {",
              "        var token = jsonData.data[0];",
              "        pm.expect(token).to.have.property('tokenAddress');",
              "        pm.expect(token).to.have.property('priceUsd');",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens"]
        },
        "description": "Get default token list (20 items)"
      },
      "response": []
    },
    {
      "name": "5. Get Token List - With Limit",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Returns exactly 5 tokens', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.data.length).to.be.at.most(5);",
              "});",
              "",
              "pm.test('Response time is acceptable', function () {",
              "    pm.expect(pm.response.responseTime).to.be.below(3000);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens?limit=5",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens"],
          "query": [
            {
              "key": "limit",
              "value": "5"
            }
          ]
        },
        "description": "Test pagination with custom limit"
      },
      "response": []
    },
    {
      "name": "6. Get Token List - Sort by Volume",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Tokens are sorted by volume (descending)', function () {",
              "    var jsonData = pm.response.json();",
              "    if (jsonData.data.length > 1) {",
              "        for (var i = 0; i < jsonData.data.length - 1; i++) {",
              "            var current = jsonData.data[i].volume24hUsd || 0;",
              "            var next = jsonData.data[i + 1].volume24hUsd || 0;",
              "            pm.expect(current).to.be.at.least(next);",
              "        }",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens?sortBy=volume24hUsd&limit=10",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens"],
          "query": [
            {
              "key": "sortBy",
              "value": "volume24hUsd"
            },
            {
              "key": "limit",
              "value": "10"
            }
          ]
        },
        "description": "Test sorting by 24h volume"
      },
      "response": []
    },
    {
      "name": "7. Get Token List - With Min Volume Filter",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('All tokens have volume >= 10000', function () {",
              "    var jsonData = pm.response.json();",
              "    jsonData.data.forEach(function(token) {",
              "        if (token.volume24hUsd) {",
              "            pm.expect(token.volume24hUsd).to.be.at.least(10000);",
              "        }",
              "    });",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens?minVolume=10000&limit=10",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens"],
          "query": [
            {
              "key": "minVolume",
              "value": "10000"
            },
            {
              "key": "limit",
              "value": "10"
            }
          ]
        },
        "description": "Test filtering by minimum volume"
      },
      "response": []
    },
    {
      "name": "8. Get Token List - Sort by Price Change",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Returns data array', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.data).to.be.an('array');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens?sortBy=priceChange24h&limit=5",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens"],
          "query": [
            {
              "key": "sortBy",
              "value": "priceChange24h"
            },
            {
              "key": "limit",
              "value": "5"
            }
          ]
        },
        "description": "Test sorting by 24h price change"
      },
      "response": []
    },
    {
      "name": "9. Search Tokens - Valid Query (Happy Path)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Returns array of results', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.be.an('array');",
              "});",
              "",
              "pm.test('Results contain search term', function () {",
              "    var jsonData = pm.response.json();",
              "    if (jsonData.length > 0) {",
              "        jsonData.forEach(function(token) {",
              "            var hasMatch = ",
              "                (token.tokenName && token.tokenName.toLowerCase().includes('sol')) ||",
              "                (token.tokenSymbol && token.tokenSymbol.toLowerCase().includes('sol')) ||",
              "                token.tokenAddress.toLowerCase().includes('sol');",
              "            pm.expect(hasMatch).to.be.true;",
              "        });",
              "    }",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens/search?q=sol",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens", "search"],
          "query": [
            {
              "key": "q",
              "value": "sol"
            }
          ]
        },
        "description": "Search for tokens containing 'sol'"
      },
      "response": []
    },
    {
      "name": "10. Search Tokens - Empty Query (Edge Case)",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Returns empty array for empty query', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.be.an('array');",
              "    pm.expect(jsonData.length).to.equal(0);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens/search?q=",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens", "search"],
          "query": [
            {
              "key": "q",
              "value": ""
            }
          ]
        },
        "description": "Test with empty search query"
      },
      "response": []
    },
    {
      "name": "11. Pagination - With Cursor",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Has pagination fields', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('data');",
              "    pm.expect(jsonData).to.have.property('nextCursor');",
              "    pm.expect(jsonData).to.have.property('total');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens?limit=5",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens"],
          "query": [
            {
              "key": "limit",
              "value": "5"
            }
          ]
        },
        "description": "Test pagination structure and cursor"
      },
      "response": []
    },
    {
      "name": "12. Performance Test - Rapid Requests",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response time under 2 seconds', function () {",
              "    pm.expect(pm.response.responseTime).to.be.below(2000);",
              "});",
              "",
              "pm.test('Cache should speed up repeated requests', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('tokenAddress');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/token/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
          "host": ["{{baseUrl}}"],
          "path": ["api", "token", "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"]
        },
        "description": "Run this multiple times to test caching performance"
      },
      "response": []
    },
    {
      "name": "13. Edge Case - Very Large Limit",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Server handles large limit gracefully', function () {",
              "    var jsonData = pm.response.json();",
              "    pm.expect(jsonData.data).to.be.an('array');",
              "});",
              "",
              "pm.test('Response completes within reasonable time', function () {",
              "    pm.expect(pm.response.responseTime).to.be.below(5000);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/api/tokens?limit=1000",
          "host": ["{{baseUrl}}"],
          "path": ["api", "tokens"],
          "query": [
            {
              "key": "limit",
              "value": "1000"
            }
          ]
        },
        "description": "Test with unusually large limit parameter"
      },
      "response": []
    }
  ]
}
